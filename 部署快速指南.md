# 植物日記部署快速指南

這是一個簡化版的部署指南，快速上手。

## 🚀 推薦部署方案：Render.com（最簡單）

### 步驟 1：準備代碼

1. 確保您的代碼已經在 Git 倉庫中（GitHub/GitLab）

2. 確認以下文件存在：
   - `plant_diary_web/Procfile`（已創建）
   - `plant_diary_web/requirements.txt`（已更新）
   - `plant_diary_web/app.py`

### 步驟 2：在 Render 部署

1. **註冊帳號**
   - 訪問 https://render.com
   - 使用 GitHub/GitLab 帳號註冊（免費）

2. **創建 Web Service**
   - 點擊 "New +" → "Web Service"
   - 連接您的 Git 倉庫
   - 選擇包含 `plant_diary_web` 的倉庫

3. **配置設置**
   ```
   Name: plant-diary（或您喜歡的名稱）
   Environment: Python 3
   Build Command: pip install -r plant_diary_web/requirements.txt
   Start Command: cd plant_diary_web && gunicorn app:app --bind 0.0.0.0:$PORT
   ```

4. **添加環境變數**
   - `SECRET_KEY`: 生成一個隨機字符串（用於 Flask session）
     - 可以在 Python 中執行：`import secrets; print(secrets.token_hex(32))`
   - `OPENAI_API_KEY`: 您的 OpenAI API 密鑰（可選）
   - `FLASK_ENV`: `production`

5. **部署**
   - 點擊 "Create Web Service"
   - 等待構建完成（約 5-10 分鐘）
   - 部署成功後，您會獲得一個 URL（例如：`https://plant-diary.onrender.com`）

### ⚠️ 重要注意事項

1. **數據持久化**
   - Render 免費層的本地文件系統在重啟時會重置
   - SQLite 數據庫和上傳的照片可能會丟失
   - **建議**：使用 Render 的 PostgreSQL 數據庫服務

2. **免費層限制**
   - 應用在 15 分鐘不活動後會休眠
   - 首次訪問需要等待約 30 秒喚醒
   - 每月有使用時間限制

3. **照片存儲**
   - 考慮使用外部存儲服務（如 AWS S3, Cloudinary）
   - 或使用 PostgreSQL 存儲照片的二進制數據

---

## 🌐 其他部署選項

### PythonAnywhere（適合初學者）

**優點**：
- 免費層可用
- Python 環境預配置
- 簡單易用

**步驟**：
1. 註冊 https://www.pythonanywhere.com
2. 上傳代碼到 Files
3. 在 Web 標籤配置 Flask 應用
4. 設置環境變數
5. 重載應用

**限制**：
- 免費層只能有一個 Web 應用
- 只能訪問 `.pythonanywhere.com` 子域名
- 需要定期登入保持帳號活躍

---

### VPS（完全控制）

**適合**：
- 需要完全控制
- 有服務器管理經驗
- 需要高可用性

**推薦提供商**：
- DigitalOcean ($5/月起)
- Linode ($5/月起)
- AWS EC2

**基本步驟**：
1. 購買 VPS
2. 安裝 Ubuntu
3. 安裝 Python、Nginx、Gunicorn
4. 上傳代碼
5. 配置 Nginx 反向代理
6. 設置 SSL 證書（Let's Encrypt）

詳細步驟請參考 `部署指南.md`

---

## 🔧 部署前檢查清單

- [ ] 代碼已推送到 Git 倉庫
- [ ] `requirements.txt` 包含所有依賴
- [ ] `Procfile` 已創建（用於 Render/Heroku）
- [ ] 已生成 `SECRET_KEY` 並設置為環境變數
- [ ] `OPENAI_API_KEY` 已設置（如果需要 AI 功能）
- [ ] 數據庫路徑配置正確
- [ ] 照片上傳目錄權限設置正確

---

## 📝 部署後測試

1. 訪問應用 URL
2. 測試註冊功能
3. 測試登入功能（使用管理員帳號：FairyGarden/kaoming123）
4. 測試添加植物
5. 測試上傳照片
6. 測試 OCR 識別（如果已設置 API 密鑰）

---

## 🆘 常見問題

**Q: 部署後無法訪問？**
- 檢查構建日誌是否有錯誤
- 確認環境變數設置正確
- 檢查端口配置

**Q: 數據丟失了？**
- Render 免費層的文件系統會重置
- 需要使用外部數據庫服務

**Q: 上傳的照片看不到？**
- 檢查文件上傳路徑
- 確認目錄權限
- 考慮使用外部存儲服務

**Q: 如何更新應用？**
- 推送新代碼到 Git 倉庫
- Render 會自動重新部署

---

## 📚 詳細文檔

更多詳細信息請參考 `部署指南.md`

祝您部署順利！🌱



