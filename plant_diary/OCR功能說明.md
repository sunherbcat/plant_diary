# OCR 照片識別功能說明

## 功能簡介

「植物日記」現在支持通過拍攝植物花牌照片來自動識別並輸入植物的中文名稱和學名，大大簡化了添加植物的流程。

## 使用方法

1. 點擊「+ 添加新植物」按鈕
2. 在彈出的對話框中，點擊「📷 從照片識別」按鈕
3. 選擇植物花牌的照片文件
4. 等待系統識別（通常幾秒鐘）
5. 識別完成後，中文名稱和學名會自動填充到對應欄位
6. 檢查識別結果，如有需要可手動修改
7. 點擊「保存」完成添加

## 識別引擎

應用程式支持兩種 OCR 識別方式：

### 1. EasyOCR（免費，推薦）

- **優點**：
  - 完全免費
  - 不需要 API 密鑰
  - 支持中文和英文識別
  - 本地處理，數據安全

- **缺點**：
  - 首次使用需要下載模型文件（約 100-200MB）
  - 識別速度相對較慢
  - 對照片質量要求較高

- **安裝**：已在 `plant_diary_requirements.txt` 中包含

### 2. OpenAI Vision API（付費，更準確）

- **優點**：
  - 識別準確度更高
  - 識別速度更快
  - 對照片質量要求較低

- **缺點**：
  - 需要 OpenAI API 密鑰
  - 可能產生費用（按使用量收費）

- **設置方法**：
  ```powershell
  $env:OPENAI_API_KEY="your-api-key-here"
  ```

## 識別效果

### 最佳識別效果的照片要求

1. **清晰度**：照片清晰，文字不模糊
2. **光照**：光線充足，避免反光
3. **角度**：正面拍攝，避免傾斜
4. **背景**：背景簡潔，文字與背景對比明顯
5. **大小**：文字足夠大，易於識別

### 識別內容

系統會自動識別：
- **中文名稱**：如「火鶴王花燭」
- **學名**：如「Anthurium veitchii」

## 常見問題

### Q: 識別不準確怎麼辦？

A: 
- 檢查照片是否清晰
- 嘗試使用更好的光線條件重新拍攝
- 如果識別部分正確，可以手動修改不正確的部分
- 如果使用 EasyOCR，可以考慮設置 OpenAI API 密鑰使用更準確的識別

### Q: 識別速度很慢？

A: 
- 首次使用 EasyOCR 時，需要下載模型文件，之後會更快
- 如果設置了 OpenAI API 密鑰，識別速度會更快

### Q: 無法識別中文？

A: 
- 確認已安裝 `easyocr`
- 確認照片中的中文文字清晰可見
- 如果使用 EasyOCR，首次使用會自動下載中文模型

### Q: 識別結果為空？

A: 
- 檢查照片文件是否損壞
- 確認照片格式支持（JPG, PNG, BMP, GIF）
- 嘗試使用更清晰的照片
- 檢查是否有錯誤訊息

## 技術說明

### OCR 識別流程

1. **圖片載入**：讀取選中的圖片文件
2. **文字識別**：使用 OCR 引擎識別圖片中的文字
3. **文字解析**：從識別的文字中提取中文名稱和學名
4. **結果填充**：將識別結果自動填充到表單

### 文字解析規則

- **中文名稱識別**：查找包含中文字符的文字（過濾掉「童話」、「花園」等常見詞）
- **學名識別**：查找符合拉丁文學名格式的文字（如 "Genus species" 格式）

## 更新日誌

### v1.1.0
- 新增 OCR 照片識別功能
- 支持 EasyOCR 和 OpenAI Vision API
- 自動識別植物花牌中的中文名稱和學名




