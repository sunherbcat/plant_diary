# OCR 識別調試指南

## 問題描述

OCR 識別完成，但顯示「未識別」中文名稱和學名。

## 可能的原因

1. **識別到了文字，但解析邏輯沒有正確提取**
2. **識別的文字格式與預期不符**
3. **字符過濾邏輯過於嚴格**

## 已改進的功能

### 1. 更寬鬆的置信度閾值

- 從 0.3 降低到 0.2，可以識別到更多文字
- 即使識別不太準確的文字也會被包含

### 2. 改進的解析邏輯

**中文名稱識別：**
- 更智能的過濾邏輯
- 不會誤刪包含「童話」、「花園」等字符但實際是植物名稱的文本

**學名識別：**
- 支持更多格式（如 P. veitchii）
- 允許包含點號和縮寫
- 長度限制更合理（5-100個字符）

### 3. 顯示原始識別文本

現在會**始終顯示**OCR識別到的原始文本，即使沒有自動識別到中文名稱和學名。這樣您可以：
- 查看實際識別到了什麼內容
- 手動從文本中提取信息
- 幫助調試和改進識別邏輯

## 使用建議

### 如果顯示「未識別」

1. **查看原始文本**
   - 識別完成後，會顯示一個藍色框，裡面是識別到的原始文本
   - 仔細查看這些文本，找到植物的中文名稱和學名

2. **手動輸入**
   - 從原始文本中找到對應的信息
   - 手動輸入到「中文名稱」和「學名」欄位

3. **照片質量**
   - 確保照片清晰，文字可見
   - 避免反光和陰影
   - 正面拍攝，文字水平

### 示例

如果原始文本顯示：
```
童話花園
火鶴王花燭
Anthurium veitchii
```

您可以：
- 中文名稱：輸入「火鶴王花燭」
- 學名：輸入「Anthurium veitchii」

## 調試步驟

### 1. 查看識別結果

識別完成後，查看：
- 識別到的原始文本（藍色框）
- 自動提取的中文名稱和學名

### 2. 檢查照片

如果原始文本也不準確，可能是照片質量問題：
- 重新拍攝，確保清晰
- 使用更好的光線
- 避免傾斜和反光

### 3. 改進識別

如果您發現識別模式，可以：
- 記錄哪些文字被正確識別
- 記錄哪些文字被誤識別
- 幫助改進識別邏輯

## 技術細節

### 中文名稱識別規則

1. 查找包含中文字符的文本
2. 過濾掉「童話」、「花園」等標識詞
3. 保留實際的植物名稱

### 學名識別規則

1. 查找拉丁文格式的文本
2. 格式：首字母大寫的單詞 + 空格 + 小寫單詞
3. 支持縮寫格式（如 P. veitchii）

### 置信度設置

- 閾值：0.2（20%置信度）
- 這意味著即使識別不太準確的文字也會被包含
- 通過解析邏輯來過濾無關文字

## 持續改進

如果您經常遇到特定的識別問題，可以：

1. **記錄問題模式**
   - 哪些植物名稱經常無法識別
   - 原始文本的格式特點

2. **提供反饋**
   - 記錄識別結果
   - 幫助改進識別邏輯

3. **使用 OpenAI API**
   - 如果設置了 API 密鑰，識別準確度會更高
   - 特別適合複雜的識別場景

## 更新日期

2024 - OCR 識別解析邏輯改進




